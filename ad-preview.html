<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ad Preview</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css?v=21">
</head>
<body>
    <div id="game"></div>

    <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>

    <!-- Config & Data -->
    <script src="js/config.js?v=17"></script>
    <script src="js/data/leaderboard.js?v=3"></script>
    <script src="js/data/dialogue.js?v=8"></script>

    <!-- Systems -->
    <script src="js/systems/SoundEngine.js?v=4"></script>
    <script src="js/systems/ScoreManager.js?v=5"></script>
    <script src="js/systems/WaveManager.js?v=7"></script>

    <!-- Objects -->
    <script src="js/objects/Bullet.js?v=4"></script>
    <script src="js/objects/EnemyBullet.js?v=4"></script>
    <script src="js/objects/CV.js?v=4"></script>
    <script src="js/objects/PlayerShip.js?v=9"></script>
    <script src="js/objects/Enemy.js?v=4"></script>
    <script src="js/objects/Boss.js?v=16"></script>
    <script src="js/objects/PurpleUnicorn.js?v=3"></script>

    <!-- UI -->
    <script src="js/ui/HUD.js?v=9"></script>

    <!-- Scenes -->
    <script src="js/scenes/BootScene.js?v=16"></script>
    <script src="js/scenes/MenuScene.js?v=57"></script>
    <script src="js/scenes/TutorialScene.js?v=5"></script>
    <script src="js/scenes/GameScene.js?v=36"></script>
    <script src="js/scenes/BossScene.js?v=14"></script>
    <script src="js/scenes/GameOverScene.js?v=43"></script>

    <script>
    // Override BootScene to jump straight to GameOverScene with fake data
    const OriginalBoot = window.CVInvaders.BootScene;
    window.CVInvaders.BootScene = class extends OriginalBoot {
        create() {
            // Load assets as normal, then jump to GameOverScene
            const originalStart = this.scene.start.bind(this.scene);
            this.scene.start = (key) => {
                // Intercept MenuScene transition, go to GameOver instead
                if (key === 'MenuScene') {
                    // Set fake game data
                    this.registry.set('score', 4250);
                    this.registry.set('playerName', 'Recruiter');
                    this.registry.set('companyName', 'Acme Corp');
                    this.registry.set('recruiterType', 'agency');
                    this.registry.set('health', 3);
                    this.registry.set('goodCVsCaught', 12);
                    this.registry.set('goodCVsMissed', 3);
                    this.registry.set('badCVsShot', 8);
                    this.registry.set('badCVsMissed', 5);
                    this.registry.set('enemiesDefeated', 4);
                    this.registry.set('maxCombo', 6);
                    this.registry.set('bossTime', 15000);
                    this.registry.set('bossDefeated', true);
                    originalStart('GameOverScene');
                } else {
                    originalStart(key);
                }
            };
            super.create();
        }
    };
    </script>

    <script src="js/main.js?v=4"></script>
</body>
</html>
